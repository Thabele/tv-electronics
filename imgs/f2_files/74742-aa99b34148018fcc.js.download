"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74742],{23415:(e,t,r)=>{r.d(t,{J9:()=>a,M5:()=>n});var i=r(18652),n=()=>{var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,i.format)({pathname:e})}},a=()=>{var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,i.format)({pathname:e})}}},83550:(e,t,r)=>{r.d(t,{Df:()=>p,WP:()=>v,Xl:()=>l,bE:()=>c,bR:()=>_,cb:()=>d,dt:()=>u,fh:()=>f,h_:()=>m,vY:()=>y,vv:()=>h});var i=r(51895),n=r(91025),a=r(35841),s=r(18652),o=e=>{var{urlParams:t={},queryParams:r={}}=e,n="/cart/".concat(t.isPrimary?a.jT:a.pw),o=(0,i._)({},r);return{url:n,defaultParams:o,formattedUrl:(0,s.format)({pathname:n,query:o})}},l=function(){var{urlParams:e={},queryParams:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o({urlParams:e,queryParams:t}),a=(0,i._)({},r.defaultParams);return(0,n._)((0,i._)({},r),{defaultParams:a,formattedUrl:(0,s.format)({pathname:r.url,query:a})})},u=o,c=o,d=e=>{var{urlParams:t={},queryParams:r={}}=e,n="/cart/".concat(t.fromCartType,"/to/").concat(t.toCartType),a=(0,i._)({},r);return{url:n,defaultParams:a,formattedUrl:(0,s.format)({pathname:n,query:a})}},v=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.status);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},m=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},p=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},f=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.invitationId);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},_=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},h=e=>{var{urlParams:t={}}=e,r="/organization/users/".concat(t.id);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},y=function(){var{queryParams:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/cart/".concat(a.jT,"/quote"),r=(0,n._)((0,i._)({},e),{exclude_comps:1,expand:"agreements"});return{url:t,defaultParams:r,formattedUrl:(0,s.format)({pathname:t,query:r})}}},74742:(e,t,r)=>{r.r(t),r.d(t,{MosaicAssetGridWithViews:()=>g});var i=r(51895),n=r(91025),a=r(31085),s=r(8558),o=r(96353),l=r(97184),u=r(73475),c=r(71676),d=r(69612),v=r(56880),m=r(87669),p=r(12580),f=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:f,hideSimilarAction:_,onAddToCollectionsComplete:h,listId:y,showInlineSimilarity:b}=r,{assetType:g}=(0,p.BF)(),{AddToCartViews:C,addToCartViewsHandler:w,addToCartViewsProps:S}=(0,c.k)(),{AddToCollectionViews:I,addToCollectionViewsHandler:A,addToCollectionViewsProps:T,isModalOpen:k,handleCloseModal:E,collectionProps:P}=(0,d.X)({initialAssetType:g}),{PreviewModal:j,previewModalProps:x,onAssetModalHandler:L}=(0,u.l)({addToCartViewsHandler:w,addToCollectionViewsHandler:A,assets:s,compLicensingHandler:null,licensingAssetId:null,withGoToPageAction:!0,withNavigationArrows:!0,listId:y,SecondaryActionsComponent:void 0,analyticsEventSection:void 0}),U=(0,m.sD)(null==s?void 0:s[0]);return(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(v.p,(0,i._)({modalIsOpen:k,handleClose:E},U&&{collectionProps:P})),(0,a.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:y,addToCartViewsHandler:w,addToCollectionViewsHandler:A,onAssetModalHandler:L,shouldHideOnImageMobile:!0},t),showInlineSimilarity:b},r)),(0,a.jsx)(C,(0,i._)({},S)),(0,a.jsx)(I,(0,i._)({onAddToCollectionsComplete:h},T)),(0,a.jsx)(j,(0,n._)((0,i._)({},x),{hideAddToCart:f,hideSimilarAction:_,showActionIcons:!0}))]})},_=r(47700),h=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:v,onAddToCollectionsComplete:m,listId:f,showInlineSimilarity:h}=r,{assetType:y}=(0,p.BF)(),{CompLicensingViews:b,licensingAssetId:g,compLicensingProps:C,compLicensingHandler:w}=(0,_.x)(),{AddToCartViews:S,addToCartViewsHandler:I,addToCartViewsProps:A}=(0,c.k)(),{AddToCollectionViews:T,addToCollectionViewsHandler:k,addToCollectionViewsProps:E}=(0,d.X)({initialAssetType:y}),{PreviewModal:P,previewModalProps:j,onAssetModalHandler:x}=(0,u.l)({addToCartViewsHandler:I,addToCollectionViewsHandler:k,assets:s,compLicensingHandler:w,licensingAssetId:g,withGoToPageAction:!0,withNavigationArrows:!0,listId:f,SecondaryActionsComponent:void 0,analyticsEventSection:void 0});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:f,addToCartViewsHandler:I,addToCollectionViewsHandler:k,compLicensingHandler:w,licensingAssetId:g,onAssetModalHandler:x},t),showInlineSimilarity:h},r)),(0,a.jsx)(S,(0,i._)({},A)),(0,a.jsx)(T,(0,i._)({onAddToCollectionsComplete:m},E)),(0,a.jsx)(P,(0,n._)((0,i._)({},j),{hideAddToCart:v,showActionIcons:!0})),(0,a.jsx)(b,(0,i._)({},C))]})},y=r(48976),b=r(79487),g=e=>{var{setThroughProvider:t,assets:r,isBrandSstk:o}=(0,s.N)(),{isBrandEnterprise:l}=(0,y.P)(),u=(0,b.a)(),{assets:c}=e,d=t?r:c;switch("".concat(u?"MOBILE":"DESKTOP","_").concat((t?o:!l)?"ECOMM":"ENTERPRISE")){case"MOBILE_ENTERPRISE":case"DESKTOP_ENTERPRISE":return(0,a.jsx)(h,(0,n._)((0,i._)({},e),{assets:d}));default:return(0,a.jsx)(f,(0,n._)((0,i._)({},e),{assets:d}))}}},71676:(e,t,r)=>{r.d(t,{z:()=>E,k:()=>P});var i=r(49253),n=r(31085),a=r(6366),s=r(23297),o=r(14041),l=r(51895),u=r(96353),c=r(49113),d=r(83894),v=r.n(d),m=v()(()=>Promise.all([r.e(27510),r.e(72076),r.e(6885),r.e(45933),r.e(35759),r.e(15912),r.e(75083),r.e(50496),r.e(27273)]).then(r.bind(r,71694)).then(e=>({default:e.AddToCartDialog})),{loadableGenerated:{webpack:()=>[71694]},ssr:!1}),p=v()(()=>Promise.all([r.e(27510),r.e(72076),r.e(6885),r.e(45933),r.e(35759),r.e(15912),r.e(75083),r.e(50496),r.e(27273),r.e(49414)]).then(r.bind(r,5519)).then(e=>({default:e.AddToCartDialogLedger})),{loadableGenerated:{webpack:()=>[5519]},ssr:!1}),f=e=>{var{isActive:t}=e,r=(0,u._)(e,["isActive"]),i=(0,s.G)(t),a=(0,c.A)();return i&&(0,n.jsx)(a?p:m,(0,l._)({isActive:t},r))},_=r(91025),h=r(3319),y=r(88863),b=r(94722),g=r(25888),C=r(35841),w=r(75096),S=r(48976),I=r(74299),A=e=>{var{status:t,isSizeLimitWarning:r,alertLabels:i}=e;return r?i.sizeLimitWarning:t===g.qO?i.addToCartSuccess:i.addToCartWarning},T=e=>{var{isOpen:t,isSizeLimitWarning:r=!1,addToCartStatus:i,snackBarActionAllowed:a=!0,handleSnackbarClose:s}=e,{t:o}=(0,I.Bd)(h.evH),{status:u,error:c}=i,d={addToCartSuccess:o("common:actions_added_to_cart"),addToCartWarning:o("notifications:label_add_to_cart_failure"),sizeLimitWarning:o("ent:cart_size_limit_warning",{LIMIT:C.Zm}),viewActionLabel:o("common:actions_view")},v=A({status:u,isSizeLimitWarning:r,alertLabels:d}),{isBrandEnterprise:m}=(0,S.P)(),{viewCartAction:p}=(0,y.Z)(),f=(0,w.Y)(),T={onClick:()=>{s(),m?f():p()},label:d.viewActionLabel};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b.DynamicSnackbar,(0,_._)((0,l._)({},i.status===g.qO&&a&&{alertAction:T}),{alertSeverity:u,error:c,handleSnackbarClose:s,isOpen:t&&!!u,message:v}))})},k={status:"",error:void 0},E=e=>{var{addToCartStatus:t=k,assets:r=null,eventLabel:i,gridItems:a=null,isAddToCartDialogActive:o,isPrimary:l,isSnackBarOpen:u,isSizeLimitWarning:c,onAddToCart:d,onAlertSnackbarClose:v,setIsAddToCartDialogActive:m,pageSection:p,listId:_,snackBarActionAllowed:h=!0}=e;return(0,s.G)(r)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{assets:r,eventLabel:i,gridItems:a,isActive:o,isPrimary:l,listId:_,onAddToCart:d,pageSection:p,setIsActive:m}),(0,n.jsx)(T,{snackBarActionAllowed:h,addToCartStatus:t,handleSnackbarClose:v,isOpen:u,isSizeLimitWarning:c})]}):null},P=function(){var e,t,{withOptimisticUpdate:r=!0,setIsVerifying:n,snackBarActionAllowed:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l,u]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[v,m]=(0,o.useState)(null),[p,f]=(0,o.useState)(null),[_,h]=(0,o.useState)(!0),[y,b]=(0,o.useState)(null),[g,C]=(0,o.useState)(null),[w,S]=(0,o.useState)(null),{addCartItems:I,moveToSaveForLater:A,moveToPrimary:T,addToCartStatus:k,isSizeLimitWarning:P,notAddedSelectVideos:j}=(0,a.Nc)();(0,o.useEffect)(()=>()=>m(null),[]);var x=(0,o.useCallback)(e=>{var{assets:t,eventLabel:i,licenseId:a,formatType:s,licensePrice:o,cart:l,mutateCart:u,notAddedSelectVideoIds:c,pageSection:m,listId:f}=e;null==n||n(!0),d(!0),I({cart:l,eventLabel:i,gridItems:p,isPrimary:_,itemsToAdd:t||v,licenseId:a,formatType:s,licensePrice:o,mutateCart:u,notAddedSelectVideoIds:c,withOptimisticUpdate:r,pageSection:m,listId:f})},[v,p,I,_,n,r]),L=(0,o.useCallback)((e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:a}=e;null==n||n(!0),d(!0);try{yield T({itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:a})}catch(e){null==n||n(!1)}}),function(t){return e.apply(this,arguments)}),[T,n]),U=(0,o.useCallback)((t=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:a,mutateSavedForLaterCart:s}=e;null==n||n(!0),d(!0);try{yield A({itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:a,mutateSavedForLaterCart:s})}catch(e){null==n||n(!1)}}),function(e){return t.apply(this,arguments)}),[A,n]);return{addToCartViewsProps:(0,o.useMemo)(()=>({addToCartStatus:k,assets:v,eventLabel:w,gridItems:p,isAddToCartDialogActive:l,isPrimary:_,isSizeLimitWarning:P,isSnackBarOpen:c,onAddToCart:x,onAlertSnackbarClose:()=>d(!1),notAddedSelectVideos:j,setIsAddToCartDialogActive:u,pageSection:y,listId:g,snackBarActionAllowed:s}),[v,p,k,w,g,y,l,_,P,c,j,x,s]),addToCartViewsHandler:(0,o.useCallback)(e=>{var{assets:t,eventLabel:r,gridItems:i,isMoveToPrimaryCart:n=!1,isMoveToSavedForLaterCart:a=!1,isPrimaryCart:s=!0,mutatePrimaryCart:o,mutateSavedForLaterCart:l,primaryCart:c,savedForLaterCart:d,withDialog:v=!0,licenseId:p,licensePrice:_,pageSection:y,listId:g}=e;if(m(t),h(s),b(y),S(r),C(g),i&&f(i),n){L({itemsToMove:t,primaryCart:c,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}if(a){U({itemsToMove:t,primaryCart:c,savedForLaterCart:d,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}v?u(!0):x({assets:t,eventLabel:r,cart:c,licenseId:p,licensePrice:_,mutateCart:o,pageSection:y})},[x,L,U]),AddToCartViews:E}}},47700:(e,t,r)=>{r.d(t,{x:()=>L});var i=r(49253),n=r(3319),a=r(55228),s=r(77427),o=r(24091),l=r(66969),u=r(10799),c=r(43336),d=r(48204),v=r(50717),m=r(74299),p=r(14041),f=r(31085),_=r(83079),h=r(51895),y=r(96353),b=r(23297),g=r(83894),C=r.n(g),w=C()(()=>r.e(3530).then(r.bind(r,40543)).then(e=>({default:e.CompLicensingDialog})),{loadableGenerated:{webpack:()=>[40543]},ssr:!1}),S=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,b.G)(t)&&(0,f.jsx)(w,(0,h._)({isOpen:t},r))},I=C()(()=>Promise.all([r.e(27510),r.e(6885),r.e(35759),r.e(15912),r.e(75083),r.e(74125),r.e(25133)]).then(r.bind(r,67047)).then(e=>({default:e.CompLicensingDrawer})),{loadableGenerated:{webpack:()=>[67047]},ssr:!1}),A=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,b.G)(t)&&(0,f.jsx)(I,(0,h._)({isOpen:t},r))},T=C()(()=>r.e(55459).then(r.bind(r,97042)).then(e=>({default:e.CompLicensingSnackbar})),{loadableGenerated:{webpack:()=>[97042]},ssr:!1}),k=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,b.G)(t)&&(0,f.jsx)(T,(0,h._)({isOpen:t},r))},E=r(51778),P=function(){var{licensingError:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t}=(0,m.Bd)(n.mAv);return{cancel:t("common:actions_cancel"),downloadComp:t("common:actions_download_comp"),enterpriseCompLicense:t("ent:license_enterprise_comp"),genericErrorMessage:t("ent:license_now_error_message"),licensingError:(0,E.KC)({error:e,t}),licenseSuccess:t("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:t("common:actions_download_comp"),disclaimer:(0,f.jsx)(m.x6,{i18nKey:"ent:comp_disclaimer",ns:n.mAv,components:{bold:(0,f.jsx)("strong",{})}}),addMetadataToAsset:t("ent:add_metadata_to_asset_comp"),metadataFound:t("ent:previous_metadata_found_comp"),metadataMissing:t("ent:previous_metadata_missing_comp"),title:t("ent:add_metadata_to_comp")}}},j=e=>{var{assets:t=null,compLicensingHandler:r,isDialogOpen:i=!1,isDrawerOpen:n=!1,isLicensing:a=!1,isSnackBarOpen:s=!1,licensingError:o=_.vB,onDialogClose:l,onDrawerClose:u,onSnackbarClose:c,selectedAssetSize:d="",setSelectedAssetSize:v,settingsData:m=_.vB}=e,p=P({licensingError:o});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S,{assets:t,isOpen:i,onClose:l,onLicense:r,labels:p,isLicensing:a,selectedAssetSize:d,setSelectedAssetSize:v,settingsData:m}),(0,f.jsx)(A,{assets:t,isLicensing:a,isOpen:n,labels:p,onClose:u,onLicense:r,selectedAssetSize:d}),(0,f.jsx)(k,{isOpen:s,message:p.licensingError,onClose:c})]})},x=r(53117),L=function(){var e,t,r,{allowMetadata:f=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[_,h]=(0,p.useState)(null),[y,b]=(0,p.useState)(""),[g,C]=(0,p.useState)(""),[w,S]=(0,p.useState)(!1),[I,A]=(0,p.useState)(!1),[T,k]=(0,p.useState)(!1),{isLicensing:E,licensingError:P,licensingStatus:L,setLicensingStatus:U,licensingAssetsHandler:z}=(0,d.mA)(),N=(0,o.$)(),{data:O}=(0,v.M)(),F=(0,c.Y)(O),M=(0,a.Q)(),{t:D}=(0,m.Bd)(n.EJ3),q=D("file_name_edited"),{getSearchContext:R}=(0,l.J)(),{queueIpReview:B}=(0,u.F)({trackingId:null===(r=R())||void 0===r?void 0:r.search_tracking_id}),G=(0,p.useCallback)((e=(0,i._)(function*(e){var{assets:t=[],assetSize:r,eventLabel:i,format:n,metadata:a,pageSection:s,listId:o}=e;b(t[0].id);var l=!1;try{var u=yield(0,x.lw)({assets:t,assetSize:r,format:n,metadata:a,selectedAssetSize:g}),{data:c}=yield z(u);if(!((0,x.CN)(t)&&1===t.length)){var d,v,m=(0,x.sD)(t)?F:void 0,p=(null==M?void 0:null===(d=M.current)||void 0===d?void 0:d.isPeacock)?e=>{var r;return M.current.downloader.resolveUrl(t[0],e,q,null==c?void 0:null===(r=c.meta)||void 0===r?void 0:r.licensedContent)}:void 0;yield(0,x.jZ)({assets:t,compSize:m,licensedContent:null==c?void 0:null===(v=c.meta)||void 0===v?void 0:v.licensedContent,downloader:p}),N({assets:t,eventLabel:i,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:s,listId:o})}}catch(e){l=e}return B(t),b(""),l&&!I&&k(!0),{error:l}}),function(t){return e.apply(this,arguments)}),[I,F,z,N,g,q,M,B]),Y=(0,p.useCallback)((t=(0,i._)(function*(e){var{assets:t,assetSize:r,format:i,eventLabel:n,metadata:a,pageSection:o,listId:l}=e;return(h(t),U(""),!w&&(0,s.wy)(t))?(S(!0),Promise.resolve(null)):!I&&(null==O?void 0:O.requireMetadataForComp)&&!a&&f?(r&&C(r),A(!0),Promise.resolve(null)):G({assets:t,assetSize:r,eventLabel:n,format:i,metadata:a,pageSection:o,listId:l})}),function(e){return t.apply(this,arguments)}),[f,G,w,I,O,U]),V=(0,p.useMemo)(()=>({assets:_,compLicensingHandler:Y,compLicensingRequest:G,isDialogOpen:w,isDrawerOpen:I,isLicensing:E,isSnackBarOpen:T,licensingError:P,onDialogClose:()=>S(!1),onDrawerClose:()=>A(!1),onSnackbarClose:()=>k(!1),selectedAssetSize:g,setSelectedAssetSize:C,settingsData:O}),[_,Y,G,w,I,E,T,P,g,O]);return{assetsToLicense:_,compLicensingHandler:Y,compLicensingProps:V,CompLicensingViews:j,licensingAssetId:y,licensingStatus:L}}},53117:(e,t,r)=>{r.d(t,{CN:()=>g,e4:()=>f,jZ:()=>_,lw:()=>b,sD:()=>C});var i=r(49253),n=r(51895),a=r(91025),s=r(29380),o=r(63870),l=r(45182),u=r(93255),c=r(27374),d=r(39385),v=r(87669),m=r(43495),p=r(74490),f=function(){var e=(0,i._)(function*(e){var{assets:t,compSize:r,licensedContent:i,supplementalUrlType:n}=e,{downloadUrl:a,contentId:s,contentFormat:l,contentSize:u,supplementalUrls:d}=i[0]||{};if((null==d?void 0:d.length)&&n){var{url:m=a}=d.find(e=>{var{type:t}=e;return t===n})||{};return m}var f=t.find(e=>{var{id:t}=e;return t===s})||{},_=(0,v.f0)(f),{filename:h,shouldUpdateFilename:y}=(0,c.V)({assets:t,contentId:s});if(y)try{var{data:b}=yield p.Bn.post((0,o.Xt)().formattedUrl,{data:[{media_id:f.id,media_type:_,comp_size:r,media_size:u,media_format:l,filename:h}]}),{attributes:g}=(null==b?void 0:b.data[0])||{};return g.url||a}catch(e){}return a});return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,i._)(function*(e){var{assets:t=[],compSize:r,assetSize:i,licensedContent:n=[],downloader:a=m.Bx}=e;if(n.length>1){var o=(0,c.P)({assets:t,licensedContent:n}),l=(0,s.E)({urlParams:{filename:o.bundleFilename}}).formattedUrl,{data:u}=yield p.a8.post(l,o.content),{public_url:d}=u;return a(d)}return a((yield f({assets:t,compSize:r,assetSize:i,licensedContent:n})))});return function(t){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>{var t=(0,d.xB)({asset:e});return(0,a._)((0,n._)({},e),{assetType:t,licenseId:u.H8E[t]})})},y=function(){var e=(0,i._)(function*(){var{url:e}=(0,o.PX)();try{return(yield p.Bn.get(e).then(e=>null==e?void 0:e.data)).reduce((e,t)=>(0,a._)((0,n._)({},e),{[t.name]:"-"}),{})}catch(e){return{}}});return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,i._)(function*(){var{assets:e,assetSize:t,format:r,metadata:i,selectedAssetSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i;return a||(a=yield y()),{assets:h(e),format:r||"",licenseMetadata:a,licensingType:u.jO3,selectedAssetSize:t||n||"",isVideoComp:!0}});return function(){return e.apply(this,arguments)}}(),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,d.ZC)({asset:e[0]||{}})===l.FY},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[l.vo,l.W1,l.kc].includes((0,d.ZC)({asset:e[0]||{}}))}},56880:(e,t,r)=>{r.d(t,{p:()=>n});var i=r(83894),n=r.n(i)()(()=>Promise.all([r.e(27510),r.e(74782)]).then(r.bind(r,29086)).then(e=>({default:e.SignUpModal})),{loadableGenerated:{webpack:()=>[29086]},ssr:!1})},27374:(e,t,r)=>{r.d(t,{P:()=>u,V:()=>l});var i=r(87669),n=r(80546),a="shutterstock",s="shutterstock_editorial",o=e=>{var{asset:t}=e;return(0,i.Uh)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,i.zz)({asset:t})?{prefix:s,shouldUpdateFilename:!1}:{prefix:a,shouldUpdateFilename:!1}},l=e=>{var{assets:t,contentId:r}=e,{prefix:i,shouldUpdateFilename:n}=o({asset:t.find(e=>{var{id:t}=e;return t===r})||{}});return{filename:"".concat(i,"_").concat(r),shouldUpdateFilename:n}},u=e=>{var{assets:t=[],licensedContent:r=[]}=e,o=t.every(e=>(0,i.zz)({asset:e})),u=r.map(e=>{var{contentId:r,downloadUrl:i,contentFormat:n}=e,{filename:a}=l({assets:t,contentId:r}),s=i.split("/").pop().split(".").pop();return(s.length>4||s.length<2)&&(s=n),{filename:"".concat(a,".").concat(s),url:i}}),c=(0,n.kX)();return{bundleFilename:"".concat(o?s:a,"_").concat(c,".zip"),content:u}}},4419:(e,t,r)=>{r.d(t,{l:()=>n});var i=r(63522),n=e=>{var t,{user:r}=e;return null==r?void 0:null===(t=r.roles)||void 0===t?void 0:t.includes(i.lc)}},95680:(e,t,r)=>{r.d(t,{h:()=>u});var i=r(58837),n=r(98870),a=r(4079),s=r(93703),o=r(62719),l=e=>{var{acc:t,totalCostOfItems:r,amountRemaining:n,totalAmount:a,bypassLowBalance:s=!1}=e;return s||(r>n&&(t.hasInsufficientSubscriptionCredits=!0,t.hasLowDebitableBalance=!1,t.insufficientAmount=r-n),!t.hasInsufficientSubscriptionCredits&&n<=a*i.O7&&(t.hasLowDebitableBalance=!0)),t},u=e=>{var{items:t,subscriptions:r,subscription:u,hasWrapperSubscription:c=!0}=e;if(t&&t.length){var d={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:i.EV};return t.reduce((e,t)=>{var d,{licenseId:v,price:m}=t,p=(0,a.W)({assets:[t]}),f=u||(0,o.A)({subscriptions:null===(d=(0,s.s)({assetType:p,subscriptions:r}))||void 0===d?void 0:d.subscriptions,licenseName:v,assetType:p})||{},{totalAmount:_,amountRemaining:h,amountType:y,amount:b}=(0,n.hY)(f);e.amountType=y;var g=parseFloat(m),C=parseFloat(e.total)+g;if(e.total+=g,y===i.zy){var w=parseFloat(b),S=parseFloat(e.totalCreditAmount)+w;return e.totalCreditAmount+=w,l({acc:e,totalCostOfItems:S,amountRemaining:h,totalAmount:_,bypassLowBalance:!c})}return l({acc:e,totalCostOfItems:C,amountRemaining:h,totalAmount:_,bypassLowBalance:!c})},d)}var v=r||{},m=Object.keys(v).find(e=>Array.isArray(v[e])&&v[e].length),p=m&&(0,n.j6)({subscriptions:v[m]||[]})[0]||{},{totalAmount:f,amountRemaining:_,amountType:h}=(0,n.hY)(p);return{amountType:h,hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:_<=f*i.O7,insufficientAmount:null}}},11995:(e,t,r)=>{r.d(t,{I:()=>n});var i=r(58837),n=e=>{var{canShowLedgerLowBalance:t,hasInsufficientSubscriptionCredits:r=!1,units:n,amount:a,initialCommitment:s}=e;if(r)return!1;var o=i.Gy[n];return t&&o?Number(a)<=o:Number(a)<=Number(s)*i.O7}},95109:(e,t,r)=>{r.d(t,{E:()=>o});var i=r(58837),n=r(98870),a=r(75292),s=r(95680),o=e=>{var t,{items:r,isLoading:o,subscription:l,subscriptions:u,userCapabilities:c}=e;return o?{}:(l&&(t=l.creditType),u&&u.length>0&&(t=u[0].creditType),(0,n.fY)({userCapabilities:c})?(0,s.h)({items:r,subscription:l,subscriptions:u,hasWrapperSubscription:(0,n.GT)({userCapabilities:c})}):{amountType:t||i.EV,hasLowDebitableBalance:!1,hasInsufficientSubscriptionCredits:l&&0===(0,a.J)({subscription:l}),insufficientAmount:null})}},70143:(e,t,r)=>{r.d(t,{b:()=>o,q:()=>s});var i=r(58837),n=r(87669),a=r(58838),s=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{priceAsAbsolute:r,creditCurrency:s,product:o}=t,l=(0,a.t)({subscription:t}),u=null!=s?s:null==o?void 0:o.currency;if(!r){var{creditPrice:c,creditType:d=i.EV}=t;return{price:"".concat((0,n.YO)({price:c,isUnlimited:l})),priceType:d,currency:u}}var{price:v,priceType:m}=r;return{price:"".concat((0,n.YO)({price:v,isUnlimited:l})),priceType:m,currency:u}},o=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{currency:r,currencyCost:a}=t;return{price:"".concat((0,n.YO)({price:a,isUnlimited:!1})),priceType:i.EV,currency:r}}},4900:(e,t,r)=>{r.d(t,{i:()=>o});var i=r(55802),n=r(66969),a=r(18227),s=r(14041),o=()=>{var{analytics:e}=(0,a.pn)(),{getSearchContext:t}=(0,n.J)();return(0,s.useCallback)(r=>{var{assets:n=[]}=r,a=t(n[0]);e.productLicensed({products:n.map(e=>(0,i.Un)({asset:e,shouldGetSearchContextFromAsset:!0})),search_context:a})},[e,t])}},10799:(e,t,r)=>{r.d(t,{F:()=>_});var i=r(49253),n=r(51895),a=r(91025),s=r(71765),o=r(65288),l=r(39857),u=r(48976),c=r(85322),d=r(61491),v=r(92044),m=function(){var e=(0,i._)(function*(e){var{items:t,trackingId:r}=e;0!==t.length&&(yield(0,v.A)("/message-gateway/ip-review",(0,a._)((0,n._)({method:"POST",requireAuth:!0},(0,d.H)({trackingId:r})),{body:{media:t.map(e=>({mediaId:e}))}})))});return function(t){return e.apply(this,arguments)}}(),p=r(93402),f=r(14041),_=function(){var e,{trackingId:t="",updateRequestCache:r,onComplete:d=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,c.s)("/"),{isBrandEnterprise:_}=(0,u.P)(),h=(0,p.jE)();return{queueIpReview:(0,f.useCallback)((e=(0,i._)(function*(e){if(_){var i,u,c=Array.isArray(e)?e:[e],p=c.reduce((e,t)=>(0,o.iu)(t)?[...e,String(t.id)]:e,[]);if(p.length){var f=(yield h.fetchQuery({queryKey:(0,l.IF)({assetIds:p}),queryFn:e=>{var{queryKey:t}=e;return(0,l.tz)(v,t)}})).reduce((e,t)=>(null==t?void 0:t.isIpReviewed)===!1&&(null==t?void 0:t.ipReviewStatus)!==s.eG?[...e,t]:e,[]);try{if(f.length){yield m({items:f.map(e=>null==e?void 0:e.classicId),trackingId:t});var y=f.map(e=>(h.setQueryData(e.queryKey,[(0,a._)((0,n._)({},e),{isIpReview:!1,ipReviewStatus:s.eG})]),h.invalidateQueries({queryKey:e.queryKey,predicate:t=>{var{queryKey:r}=t;return r===e.queryKey}})));yield Promise.all([...r?[r({reviewStatus:s.eG})]:[],...y]),d(c)}}catch(e){null===(u=window.NREUM)||void 0===u||null===(i=u.noticeError)||void 0===i||i.call(u,e,{message:"Error adding assets to queue for IP review: ".concat(f.map(e=>null==e?void 0:e.classicId).join(", "),"\ntrackingId: ").concat(t)})}}}}),function(t){return e.apply(this,arguments)}),[_,h,v,t,r,d])}}},29982:(e,t,r)=>{r.d(t,{k:()=>n});var i=r(55606),n=()=>{var{checkGate:e}=(0,i.c)();return e("lego-2245-ledger-low-balance")}},43336:(e,t,r)=>{r.d(t,{Y:()=>a});var i=r(4419),n=r(36908),a=e=>{var{data:t}=(0,n.rA)();return(0,i.l)({user:t})?null==e?void 0:e.compSizeImage:null==e?void 0:e.compSizeSubImage}},48204:(e,t,r)=>{r.d(t,{mA:()=>W});var i=r(49253),n=r(51895),a=r(91025),s=r(63870),o=r(25888),l=r(45182),u=r(83507),c=r(55185),d=r(93255),v=r(58837),m=r(81127),p=r(55802),f=r(22714),_=r(39385),h=r(51778),y=r(11838),b=r(61491),g=r(13847),C=r(58838),w=r(1134),S=r(62719),I=r(4900),A=r(48946),T=r(48976),k=r(87669),E=r(74490),P=r(14041),j=e=>{var t,{assets:r}=e,i=(0,k.f0)(r[0]);return{include:"subscriptions",content_type:(0,_.Uw)({assetType:i,assetId:null===(t=r[0])||void 0===t?void 0:t.id}),content_ids:r.reduce((e,t)=>[...e,t.id.toString()],[]).join(",")}},x=e=>{var{assets:t}=e,r={};return t.forEach(e=>{var t=(0,k.f0)(e),i=(0,_.Uw)({assetId:e.id,assetType:t});r[i]=[...r[i]?r[i]:[],e]}),r},L=e=>{var{assetEligibility:t}=e,{permittedLicenses:r,subscriptions:i}=t;return null==i?void 0:i.filter(e=>{var{license:t}=e;return r.includes(t.replace("_unlimited",""))})},U=e=>{var t,{assets:r=[],user:i}=e;return null===(t=Object.values(x({assets:r})))||void 0===t?void 0:t.map(e=>{var t=j({assets:e}),{formattedUrl:r}=(0,s.kE)({urlParams:{licenseeIdentifier:"organization-".concat(null==i?void 0:i.organizationId)},queryParams:t});return E.Bn.get(r)})},z=e=>{var{data:t}=e,r=[];return t.map(e=>{var t=e.id.split("-"),i=t[t.length-1],n=L({assetEligibility:e});return r.push({assetId:i,subscriptions:n})}),r},N=r(36908),O=r(5067),F=r(18227),M=r(34559),D=r(15004),q=r(57518),R=r(57794),B=r(69200),G={[d.jO3]:s.DH,[d.miZ]:s.E6},Y=e=>{var t,r,{asset:i,subscriptions:n}=e,a=(0,_.ZC)({asset:i}),{licenseId:s,contentTier:o}=i;switch(a){case l.G_:return(0,w.N)({assetType:l.G_,subscriptions:[...null!==(t=null==n?void 0:n.videoSubscriptions)&&void 0!==t?t:[],...null!==(r=null==n?void 0:n.videoCompSubscriptions)&&void 0!==r?r:[]],selectedLicenseId:s});case l.on:case l.FY:return(0,S.A)({subscriptions:[...n.musicSubscriptions,...n.musicCompSubscriptions],licenseName:i.licenseId});case l.M9:return(0,S.A)({subscriptions:[...n.sfxSubscriptions,...n.sfxCompSubscriptions],licenseName:i.licenseId});case l.uH:return(0,S.A)({subscriptions:[...n.editorialImageSubscriptions,...n.editorialImageCompSubscriptions,...n.editorialVideoSubscriptions,...n.editorialVideoCompSubscriptions],licenseName:i.licenseId,contentTier:o});case l.W1:default:return(0,S.A)({subscriptions:[...n.imageSubscriptions,...n.imageCompSubscriptions],licenseName:i.licenseId,contentTier:o})}},V=e=>{var{asset:t,subscriptions:r}=e,i=Y({asset:t,subscriptions:r});return(0,C.t)({subscription:i})?(0,a._)((0,n._)({},i),{creditPrice:l.Mp,creditType:v.EV}):i},W=()=>{var{isBrandEnterprise:e}=(0,T.P)(),{data:t}=(0,O.R7)(),[r,s]=(0,P.useState)(!1),[v,C]=(0,P.useState)(""),[S,k]=(0,P.useState)({}),{data:j}=(0,N.rA)(),[,x]=(0,D.Ry)(e=>e),L=(0,F.Jz)(),{analytics:Y}=(0,F.pn)(),W=(0,p.cv)(Y),K=(0,g.H)(W),Q=L||(0,q.vb)(),Z=(0,I.i)(),H=(0,A.Z)(),J=(0,B.mj)(),{locale:$}=(0,m.Y)(),{sendOrderConfirmationEmails:X}=(0,R.k)();return{isLicensing:r,licensingAssetsHandler:(0,P.useCallback)(function(){var r=(0,i._)(function*(r){var{alreadyLicensedAssets:v=[],assets:m=[],cartMetadata:p={},format:g="",licenseeMetadata:S={},isVideoComp:I=!1,licenseMetadata:A={},licensingType:T,selectedAssetSize:P=""}=r,L=(N=(0,i._)(function*(){var r,s=z({data:(yield Promise.all(U({assets:m,user:j}))).map(e=>{var{data:t}=e;return(0,M.A)(t)}).flat()}),o=m.map((r=(0,i._)(function*(e){var t=(0,_.ZC)({asset:e}),{licenseId:r}=e,{subscriptions:i}=(null==s?void 0:s.find(t=>{var{assetId:r}=t;return r===String(e.id)}))||{},{id:o,license:c}=(0,w.N)({assetType:t,subscriptions:i,selectedLicenseId:r})||{},d=yield(0,f.og)({asset:e,format:g,selectedAssetSize:P,licenseName:c,isVideoComp:I});return(0,a._)((0,n._)({},d,P&&y.N[P]&&{comp_size:P},t===l.M9&&{override_filename:"".concat(u.wT,"_").concat(e.id,".").concat(g||d.content_format)},t===l.m$&&{content_provider:l._Y}),{license_name:c,show_modal:!0,subscription_id:o})}),function(e){return r.apply(this,arguments)}));return{licensingPayload:{content:yield Promise.all(o),license_metadata:A,required_cookies:"",decode_hadron_ids:e},orderMetadata:m.map(e=>{var{currency:r,description:i,descriptionLanguageMap:n={},id:a,itemType:s,headline:o,licenseId:l,preview:u={},price:c,priceType:d,src:v,thumb:m,thumbImageUrl:p,title:f,type:_}=e,h=r,y=c,b=d;if(!h||!y||!b){var{creditCurrency:g,creditPrice:C,creditType:w}=V({asset:e,subscriptions:t});h=h||g,y=y||C,b=d||w}return h&&!O&&(O=h),b&&!F&&(F=b),{description:n[$]||i,formattedPrice:H({price:y,localeCurrencyOverride:h,priceType:b}),headline:o,id:a,itemType:s,licenseId:l,licenseName:J({licenseName:l}),price:y,priceType:b,thumbnailSrc:v||p||u.url||m,title:f,type:_}})}}),function(){return N.apply(this,arguments)});try{s(!0),C("");var N,O,F,D,q,R,{licensingPayload:B,orderMetadata:Y}=yield L(),W=G[T]({urlParams:{licenseeIdentifier:"organization-".concat(null==j?void 0:j.organizationId)}}).formattedUrl,ee=(null==B?void 0:null===(D=B.content)||void 0===D?void 0:D.length)>=45,et=(0,n._)({},(0,b.H)((0,n._)({trackingId:Q},K?{headers:{[c.ed]:K}}:{})),ee?{timeout:3e4}:{}),er=yield E.Bn.post(W,B,et);if(Z({assets:m}),x({assets:m,metadata:p,licensedContent:(null===(R=(0,M.A)(er.data))||void 0===R?void 0:null===(q=R.meta)||void 0===q?void 0:q.licensedContent)||[]}),!m.some(e=>{var{licenseId:t}=e;return d.t9I.includes(t)})){var ei=Y.filter(e=>!(0,h.en)({alreadyLicensedAssets:v,asset:e}));X({cartTotalCurrency:O,filteredOrderMetadata:ei,licenseMetadata:S,priceType:F})}return C(o.qO),er}catch(e){var en,ea,es=(0,h.nR)({error:e,user:j});throw null===(ea=window.NREUM)||void 0===ea||null===(en=ea.addPageAction)||void 0===en||en.call(ea,"Enterprise licensing error",(0,a._)((0,n._)({},es),{alreadyLicensedAssets:v,assets:m.map(e=>{var{id:t,type:r}=e;return{id:t,type:r}}),cartMetadata:p,format:g,licenseeMetadata:S,isVideoComp:I,licenseMetadata:A,licensingType:T,selectedAssetSize:P})),k(e),C(o.Nz),e}finally{s(!1)}});return function(e){return r.apply(this,arguments)}}(),[j,e,$,H,J,t,Q,Z,x,X,K]),licensingError:S,licensingStatus:v,setIsLicensing:s,setLicensingStatus:C}}},57794:(e,t,r)=>{r.d(t,{k:()=>w});var i=r(3319),n=r(23415),a=r(9444),s=r(10428),o=r(81127),l=r(51824),u=r(48946),c=r(50717),d=r(36908),v=r(86667),m=r(60932),p=r(74490),f=r(22717),_=r(74299),h=r(14041),y=new RegExp(s.X),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{emailCartCheckoutConfirmation:t,orderEmail:r}=e;return t&&r?r.split(",").filter(e=>y.test(e)):[]},g=e=>{var{purchaseOrder:t}=e;return"".concat(null==t?void 0:t[0]," : ").concat(null==t?void 0:t[1]).split(" ").map(e=>(0,f.Z)(e)).join(" ")},C=e=>{var{t,keys:{currentYear:r,emailAddress:i,purchaseOrder:n}}=e;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(g({purchaseOrder:n})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},w=()=>{var{t:e}=(0,_.Bd)(i._RK),{data:t}=(0,d.rA)(),{data:r}=(0,v.M)(),{data:s}=(0,c.M)(),{name:f,email:y,phone:g}=(0,m.e)({fetchTrigger:!0})||{},{locale:w,fullLocale:S}=(0,o.Y)(),I=(0,u.Z)();return{sendOrderConfirmationEmails:(0,h.useCallback)(function(){var{cartTotalCurrency:i,filteredOrderMetadata:o,licenseMetadata:u,priceType:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=[...(null==r?void 0:r.emailCartCheckoutConfirmation)?[null==t?void 0:t.email]:[],...b(s)];if(d.length&&(null==o?void 0:o.length)){var v,m,_,h,A=C({t:e,keys:{currentYear:new Date().getFullYear(),emailAddress:null==t?void 0:t.email,purchaseOrder:Object.entries(u)[0],repName:f,repPhoneNumber:g,repEmail:y}});try{var T={cartItems:o,fullName:null==t?void 0:t.fullName,invoiceDate:new Intl.DateTimeFormat(S).format(new Date),labels:A,licenseMetadata:u,repEmail:y,repName:f,repPhoneNumber:g,totalAmount:I({price:(0,l.bc)(o,[]),localeCurrencyOverride:i,priceType:c}),username:null==t?void 0:t.username};p.Y$.post((0,n.J9)().formattedUrl,{emails:[...new Set(d)],emailBody:T,emailSubject:"".concat(A.emailSubjectLine),language:w})}catch(e){null===(m=window.NREUM)||void 0===m||null===(v=m.setTransactionName)||void 0===v||v.call(m,"sendOrderConfirmationEmail/".concat(a.o5)),null===(h=window.NREUM)||void 0===h||null===(_=h.noticeError)||void 0===_||_.call(h,e,{message:"Failed sending order confirmation emails to: ".concat(d.join(", "))})}}},[S,w,s,I,y,f,g,e,null==t?void 0:t.email,null==t?void 0:t.fullName,null==t?void 0:t.username,null==r?void 0:r.emailCartCheckoutConfirmation])}}},69200:(e,t,r)=>{r.d(t,{mj:()=>u});var i=r(3319),n=r(19393),a=r(48976),s=r(74299),o=r(14041),l="ent:license_",u=()=>{var{t:e}=(0,s.Bd)([i.Xek,i.fW6]),{isBrandSstk:t}=(0,a.P)();return(0,o.useCallback)(function(){var r,a,s,o,u,c,{licenseName:d,subscription:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d&&(r="".concat(l).concat(null==d?void 0:d.replace(/_unlimited/,""))),v){if(t){if((0,n.l2)({productName:null==v?void 0:null===(a=v.product)||void 0===a?void 0:a.name}))return e(r="".concat("product-names:").concat(null===(o=v.product)||void 0===o?void 0:o.name),{ns:i.fW6});r="".concat("ecomm:license_").concat(null===(s=v.product)||void 0===s?void 0:s.name)}!t&&v.redeemableFor&&(r="".concat(l).concat(null===(u=v.redeemableFor)||void 0===u?void 0:u.replace(/_unlimited/,""))),!t&&v.license&&(r="".concat(l).concat(null===(c=v.license)||void 0===c?void 0:c.replace(/_unlimited/,"")))}return r?e(r):""},[t,e])}},6366:(e,t,r)=>{r.d(t,{_B:()=>H,Ym:()=>Z,ng:()=>X,Nc:()=>ee,_R:()=>J,Fh:()=>$,tS:()=>et,gz:()=>ei});var i=r(49253),n=r(51895),a=r(91025),s=r(96353),o=r(83550),l=r(25888),u=r(21347),c=r(94869),d=r(45182),v=r(35841),m=r(17442),p=r(82608),f=r(58837),_=r(57764),h=r(55802),y=r(22714),b=r(39385),g=r(87669),C=r(91758),w=r(98870),S=r(11995),I=e=>{var{items:t,assetEligibleSubscriptions:r,canShowLedgerLowBalance:i}=e,n={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:f.mz};return t.reduce((e,t)=>{var a,{licenseId:s,price:o,id:l}=t,u=null==r?void 0:null===(a=r[l])||void 0===a?void 0:a.licenseSubscriptions.find(e=>e.license===s);if(!u)return n;var{totalPrepaidAmount:c,prepaidAmountRemaining:d,currency:v}=u,m=parseFloat(o),p=parseFloat(e.total)+m;return e.total+=m,p>d&&(e.hasInsufficientSubscriptionCredits=!0,e.hasLowDebitableBalance=!1,e.insufficientAmount=p-d),e.hasLowDebitableBalance=(0,S.I)({canShowLedgerLowBalance:i,hasInsufficientSubscriptionCredits:e.hasInsufficientSubscriptionCredits,units:v,amount:d,initialCommitment:c}),e},n)},A=r(45790),T=r(58838),k=r(95109),E=r(62719),P=r(70143),j=r(70627),x=r(10799),L=r(29982),U=r(5067),z=r(25898),N=r(74490),O=r(93402),F=r(97681),M=r(31242),D=r(14041),q=r(29037),R=r(66969),B=r(36908),G="Size limit warning",Y=e=>{var t,{item:r,subscriptions:i}=e,{itemType:n,metadata:a}=r,s=(0,g.Q)({asset:r}),o=null==a?void 0:null===(t=a.cart)||void 0===t?void 0:t.licenseId,{allSubscriptions:l}=i;switch(n){case d.G_:return(0,j.d)({licenseName:o,subscriptions:l});case d.FY:case d.M9:case d.W1:default:return(0,E.A)({licenseName:o,subscriptions:l,assetType:n,contentTier:s})}},V=e=>{var t,r,{item:i}=e;return(null===(t=i.largeThumb)||void 0===t?void 0:t.url)||(null===(r=i.preview)||void 0===r?void 0:r.url)||i.preview||i.thumb||""},W=e=>{var t,{asset:r}=e;return r.itemType===d.W1&&!r.sizes&&!(null===(t=r.metadata)||void 0===t?void 0:t.cart.sizes)},K=e=>{var t,r,{item:i}=e,s=(0,g.$9)(i);if(i.itemType===d.m$){var o,l,u,v,m,p,f,_,h,y,b,w=null==i?void 0:null===(_=i.product)||void 0===_?void 0:null===(f=_.productPreviews[0])||void 0===f?void 0:null===(p=f.previewThumbnailImages)||void 0===p?void 0:p.find(e=>{var{resolution:t}=e;return"res600x600"===t}),S={[c.jx]:{height:600,width:600,src:"https://".concat(null==w?void 0:null===(h=w.assetFile)||void 0===h?void 0:h.s3Path)}};return{[c.jx]:{height:600,width:600,src:(0,C.c0)((0,a._)((0,n._)({},i),{angle:null==i?void 0:null===(b=i.metadata)||void 0===b?void 0:null===(y=b.cart)||void 0===y?void 0:y.angle,displays:S}))}}}return s?{[c.pI]:{height:i.height||(null===(t=i.preview)||void 0===t?void 0:t.height),width:i.width||(null===(r=i.preview)||void 0===r?void 0:r.width),src:i.preview||i.thumb}}:{[c.jx]:{height:(null===(o=i.largeThumb)||void 0===o?void 0:o.height)||(null===(l=i.preview)||void 0===l?void 0:l.height),width:(null===(u=i.largeThumb)||void 0===u?void 0:u.width)||(null===(v=i.preview)||void 0===v?void 0:v.width),src:null===(m=i.preview)||void 0===m?void 0:m.url}}},Q=e=>{var t,r,i,s,o,l,u,v,m,f,_,y,b,{item:g,price:C,priceType:w,currency:S,subscriptionId:I,hasCreditsRemaining:A,isUnlimited:T,isUnavailableSubscription:k}=e,E=K({item:g}),P=V({item:g}).replace("-150nw","-260nw")||(null==E?void 0:null===(t=E[c.jx])||void 0===t?void 0:t.src),j=null===(r=g.assets)||void 0===r?void 0:r.find(e=>{var{assetClass:t}=e;return t===p.Iw}),x=[d.m$,d.W1].includes(g.itemType)&&!g.src,L=null===(i=g.meta)||void 0===i?void 0:i.search_context;return(null===(o=g.metadata)||void 0===o?void 0:null===(s=o.cart)||void 0===s?void 0:s.searchContext)&&(L=(0,h.fF)({trackingId:null===(f=g.metadata)||void 0===f?void 0:null===(m=f.cart)||void 0===m?void 0:null===(v=m.searchContext)||void 0===v?void 0:v.searchTrackingId,searchTerm:null===(b=g.metadata)||void 0===b?void 0:null===(y=b.cart)||void 0===y?void 0:null===(_=y.searchContext)||void 0===_?void 0:_.searchTerm})),(0,n._)((0,a._)((0,n._)((0,a._)((0,n._)({},g),{id:g.itemId}),[d.W1,d.m$,d.uH,d.rr].some(e=>e===g.itemType)&&{image:{id:g.itemId,categories:g.categories,description:g.description||g.subhead||"",url:P,isEditorial:!!g.isEditorial,isPremium:!!g.isPremium,displays:E,permalink:g.permalink,isIllustration:g.isIllustration,isVector:g.isVector}}),{type:g.itemType,isFootageSelect:g.footageSelect,price:C,priceType:w,waveformPng:g.waveformPng||(null==j?void 0:j.externalUrl),currency:S,licenseId:(null===(u=g.metadata)||void 0===u?void 0:null===(l=u.cart)||void 0===l?void 0:l.licenseId)||"",subscriptionId:I,hasCreditsRemaining:A,isPixelSquid:g.itemType===d.m$,isUnavailableAsset:W({asset:g}),isUnlimited:T,isUnavailableSubscription:k,meta:(0,n._)({},L?{search_context:L}:{})}),x&&{src:P})},Z=e=>{var{cartItems:t=[],subscriptions:r}=e;return t.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType)).map(e=>{var t=Y({item:e,subscriptions:r}),{price:i=0,priceType:n=f.EV}=(0,P.q)({uniqueSubscription:t});return Q({item:e,price:i,priceType:n,currency:(null==t?void 0:t.creditCurrency)||"",subscriptionId:(null==t?void 0:t.id)||"-",isUnavailableSubscription:!t,hasCreditsRemaining:(0,A.X)({subscription:t}),isUnlimited:(0,T.t)({subscription:t})})})},H=e=>{var{isPrimary:t,isLedger:r=!1}=e;return(0,o.Xl)((0,n._)({urlParams:{isPrimary:t}},r&&{queryParams:{isLedger:r}})).formattedUrl},J=e=>{var{isPrimary:t}=e,r=(0,O.jE)(),s=(0,B.i9)(),{data:o}=(0,U.R7)(),l=H({isPrimary:t}),{data:u,error:c,isLoading:d}=(0,F.I)({queryKey:[l],enabled:!!(s&&o),queryFn:()=>N.C2.get(l).then(e=>{var{data:t}=e;return t&&(0,a._)((0,n._)({},t),{items:Z({cartItems:t.items,subscriptions:o})})}).catch(e=>{var t,r;throw null===(r=window.NREUM)||void 0===r||null===(t=r.recordCustomEvent)||void 0===t||t.call(r,_.s,{url:l,errorMessage:e.message,errorStack:e.stack}),e})});return{data:u,error:c,isLoading:d,mutate:function(){var e=(0,i._)(function*(e){return e?r.setQueryData([l],e):r.invalidateQueries({queryKey:[l]})});return function(t){return e.apply(this,arguments)}}()}},$=e=>{var{isPrimary:t}=e,r=(0,O.jE)(),s=(0,B.i9)(),o=H({isPrimary:t,isLedger:!0}),{data:l}=(0,F.I)({queryKey:[o],enabled:s,queryFn:()=>N.C2.get(o).then(e=>{var{data:t}=e;return t&&(0,a._)((0,n._)({},t),{items:t.items.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType))})}).catch(e=>{var t,r;throw null===(r=window.NREUM)||void 0===r||null===(t=r.recordCustomEvent)||void 0===t||t.call(r,_.s,{url:o,errorMessage:e.message,errorStack:e.stack}),e})});return{data:l,mutate:function(){var e=(0,i._)(function*(e){return e?r.setQueryData([o],e):r.invalidateQueries({queryKey:[o]})});return function(t){return e.apply(this,arguments)}}()}},X=e=>{var{cartItems:t=[],assetEligibleSubscriptions:r}=e;return t.map(e=>{var t,i,{id:n,metadata:{cart:{licenseId:a}={}}={}}=null!=e?e:{},s=null!==(i=null==r?void 0:null===(t=r[n])||void 0===t?void 0:t.licenseSubscriptions.find(e=>e.license===a))&&void 0!==i?i:null,{price:o=0,priceType:l=f.EV}=(0,P.b)({uniqueSubscription:s});return Q({item:e,price:o,priceType:l,currency:(null==s?void 0:s.currency)||(null==s?void 0:s.creditCurrency)||"",subscriptionId:(null==s?void 0:s.id)||"-",isUnavailableSubscription:!s,hasCreditsRemaining:!0,isUnlimited:(0,T.t)({subscription:s})})})},ee=()=>{var e,t=(0,O.jE)(),[r,s]=(0,D.useState)({status:"",error:void 0}),[c,p]=(0,D.useState)(!1),f=(0,D.useRef)(!1),{productAddedAnalyticsEvent:_,cartViewedAnalyticsEvent:h,productRemovedAnalyticsEvent:g}=(0,q.f)(),{getSearchContext:C}=(0,R.J)(),w=(0,M.useRouter)(),{queueIpReview:S}=(0,x.F)({trackingId:null===(e=C())||void 0===e?void 0:e.search_tracking_id}),I=(0,D.useCallback)(e=>{void 0===(null==e?void 0:e.cartId)||f.current||(f.current=!0,h(e))},[f,h]),A=(0,D.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var{id:r}=e;return -1===t.findIndex(e=>{var{id:t}=e;return"".concat(r)==="".concat(t)})})},[]),T=(0,D.useCallback)(e=>{var{cartItems:t=[],itemsToAdd:r=[]}=e,i=[...t];return r.forEach(e=>{var t=(0,b.Qk)({asset:e}),r=i.findIndex(r=>{var{id:i,type:n}=r;return"".concat(i)==="".concat(e.id)&&n===t});r>-1?i[r]=(0,n._)({},e):i.unshift((0,a._)((0,n._)({},e),{addedTime:new Date}))}),i},[]),k=(0,D.useCallback)(function(){var e=(0,i._)(function*(e){var t,{items:r,licenseId:a,licenseAsJpeg:s}=e;return Promise.all(null==r?void 0:r.map((t=(0,i._)(function*(e){var t=(0,b.Qk)({asset:e}),r=a||e.licenseId,i=s||e.licenseAsJpeg,o=yield(0,y.og)({asset:e,licenseName:r});return{item_id:e.id,item_type:t,metadata:{cart:(0,n._)({license_id:r,license_as_jpeg:i,subscription_id:e.subscriptionId,size:o.content_size,format:o.content_format,sizes:(0,y.Rj)({asset:e}),search_context:C(e),source:[d.uH,d.rr].some(e=>e===t)?m.Au:""},t===d.m$&&{angle:o.angle})}}}),function(e){return t.apply(this,arguments)})))});return function(t){return e.apply(this,arguments)}}(),[C]),E=(0,D.useCallback)(function(){var e=(0,i._)(function*(e){var{cart:r,eventLabel:i,gridItems:c,isPrimary:d=!0,itemsToAdd:m,licenseId:f,formatType:h,licensePrice:y,mutateCart:b,withOptimisticUpdate:w=!0,pageSection:I,listId:A}=e;try{var E=m.map(e=>(0,a._)((0,n._)({},e),{meta:(0,n._)({search_context:C(e)},e.meta)}));s({status:"",error:void 0}),p(!1);var P=T({cartItems:r.items,itemsToAdd:E});if(P.length>v.Zm){s({status:l.Nz}),p(!0);return}w&&b(e=>(0,a._)((0,n._)({},e),{items:P}));var j=(0,o.bE)({urlParams:{isPrimary:d}}).formattedUrl,x=yield k({items:E,licenseId:f,licenseAsJpeg:h===u.kr});yield N.C2.post(j,x),s({status:l.qO}),S(m),d&&E.forEach(e=>{var t=r.items.find(t=>{var{id:r}=t;return"".concat(r)==="".concat(e.id)});t&&f!==t.licenseId&&g({cart:r,eventLabel:i,gridItems:c,items:[e],matchingCartItem:t,pageSection:I}),_({cart:r,eventLabel:i,gridItems:c,items:[e],licenseId:f,licensePrice:y,pageSection:I,listId:A})})}catch(e){s({status:l.Nz,error:e})}finally{yield t.invalidateQueries({queryKey:[H({isPrimary:d,isLedger:!0})]}),yield t.invalidateQueries({queryKey:[H({isPrimary:d})]})}});return function(t){return e.apply(this,arguments)}}(),[T,k,C,_,g,t,S]);return{triggerCartViewedEvent:I,addCartItems:E,removeCartItems:(0,D.useCallback)(function(){var e=(0,i._)(function*(e){var{cartData:r,eventLabel:i,gridItems:s,isPrimary:l=!0,itemsToRemove:u=[],mutateCart:c,pageSection:d,routePathProps:v,withOptimisticUpdate:m=!0,mutateCallback:p}=e;try{m&&c(e=>(0,a._)((0,n._)({},e),{items:A(e.items,u)}),!1);var f=(0,o.dt)({urlParams:{isPrimary:l}}).formattedUrl;yield N.C2.delete(f,{data:u.map(e=>({item_id:e.id,item_type:(0,b.Qk)({asset:e})}))}),l&&g({cart:r,eventLabel:i,gridItems:s,items:u,pageSection:d}),v&&w.push(...v)}catch(e){}finally{p?p({isPrimary:l}):(yield t.invalidateQueries({queryKey:[H({isPrimary:l,isLedger:!0})]}),yield t.invalidateQueries({queryKey:[H({isPrimary:l})]}))}});return function(t){return e.apply(this,arguments)}}(),[A,g,w,t]),moveToSaveForLater:(0,D.useCallback)(function(){var e=(0,i._)(function*(e){var{eventLabel:t,itemsToMove:r,pageSection:i,primaryCart:u,savedForLaterCart:c,mutatePrimaryCart:d,mutateSavedForLaterCart:m}=e;s({status:"",error:void 0}),p(!1);var f=T({cartItems:c.items,itemsToAdd:r});if(f.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(G);d(e=>(0,a._)((0,n._)({},e),{items:A(e.items,r)}),!1),m(e=>(0,a._)((0,n._)({},e),{items:f}),!1);var _=(0,o.cb)({urlParams:{fromCartType:v.jT,toCartType:v.pw}}).formattedUrl,h=yield k({items:r});yield N.C2.post(_,h),g({cart:u,eventLabel:t,items:r,pageSection:i})});return function(t){return e.apply(this,arguments)}}(),[T,k,g,A]),moveToPrimary:(0,D.useCallback)(function(){var e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:u}=e;s({status:"",error:void 0}),p(!1);var c=T({cartItems:r.items,itemsToAdd:t});if(c.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(G);u(e=>(0,a._)((0,n._)({},e),{items:A(e.items,t)})),i(e=>(0,a._)((0,n._)({},e),{items:c}));var d=(0,o.cb)({urlParams:{fromCartType:v.pw,toCartType:v.jT}}).formattedUrl,m=yield k({items:t});yield N.C2.post(d,m),_({cart:r,items:t})});return function(t){return e.apply(this,arguments)}}(),[T,k,_,A]),addToCartStatus:r,setAddToCartStatus:s,isSizeLimitWarning:c}},et=e=>{var{cartItems:t}=e,{data:r}=(0,U.R7)(),i=(0,z.h)(),{isLoading:n}=i,a=(0,s._)(i,["isLoading"]),o=(e=>{var{items:t}=e;return null==t?void 0:t.some(e=>{var{hasCreditsRemaining:t}=e;return!t})})({items:t}),{amountType:l,hasInsufficientSubscriptionCredits:u,insufficientAmount:c,hasLowDebitableBalance:d}=(0,k.E)({items:t,isLoading:!r||n,subscriptions:r,userCapabilities:a});return{amountType:l,isDebitableUser:(0,w.fY)({userCapabilities:a}),userCanViewDebitableBalance:(0,w.Pl)({userCapabilities:a}),hasInsufficientCartItemsCredits:o,hasInsufficientSubscriptionCredits:u,insufficientAmount:c,hasLowDebitableBalance:d}},er=e=>{var{items:t}=e;return null==t?void 0:t.some(e=>{var{hasCreditsRemaining:t}=e;return!t})},ei=e=>{var{cartItems:t,assetEligibleSubscriptions:r}=e,i=(0,z.h)(),{isLoading:n}=i,a=(0,s._)(i,["isLoading"]),o=(0,L.k)();if(n)return{};var l=er({items:t}),{hasInsufficientSubscriptionCredits:u,insufficientAmount:c,hasLowDebitableBalance:d,amountType:v}=I({items:t,assetEligibleSubscriptions:r,canShowLedgerLowBalance:o})||{};return{amountType:v,isDebitableUser:(0,w.fY)({userCapabilities:a}),userCanViewDebitableBalance:(0,w.Pl)({userCapabilities:a}),hasInsufficientCartItemsCredits:l,hasInsufficientSubscriptionCredits:u,insufficientAmount:c,hasLowDebitableBalance:d}}},49113:(e,t,r)=>{r.d(t,{A:()=>n});var i=r(25898),n=()=>{var e=(0,i.h)();return null==e?void 0:e.userCanViewPortfolio}},22717:(e,t,r)=>{r.d(t,{Z:()=>i});var i=e=>e&&"string"==typeof e?"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)):""}}]);
//# sourceMappingURL=74742-aa99b34148018fcc.js.map